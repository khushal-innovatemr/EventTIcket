<div *ngIf="successMessage" class="fixed top-5 right-5 bg-green-500 text-white px-6 py-3 rounded-lg shadow-md animate-bounce">
    {{ successMessage }}
</div>

<div *ngIf="isButtonClicked" class="ml-16 mb-6 mt-3 max-w-3xl absolute right-5 bg-gradient-to-r from-orange-400 to-orange-600 text-white px-8 py-4 rounded-2xl shadow-lg flex items-center space-x-4">
    <div class="text-xl font-semibold">
        <p> Welcome, {{ names }}!</p>
    </div>
</div>
<div class="bg-white shadow-xl rounded-2xl p-8 max-w-3xl mx-auto mt-10 mb-8 max-h-full">
    <h3 class="text-4xl font-extrabold text-gray-800 mb-8 text-center">
        Discord Room: {{ this.pathValue[1] }}
    </h3>

    <div class="space-y-6 text-lg text-gray-700">
        <div class="flex flex-col items-center space-y-4">
            <input
                id="name"
                type="text"
                [(ngModel)]="name"
                placeholder="Your Name"
                class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"
                *ngIf="!isButtonClicked"
            />
            <button
                *ngIf="!isButtonClicked"
                (click)="SendName()"
                class="px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500"
            >
                Submit Name
            </button>
        </div>

        <div class="flex flex-col space-y-4">
            <input
              [(ngModel)]="newMessage"
              placeholder="Type your message..."
              class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-4 focus:ring-blue-400 focus:border-blue-400 shadow-inner text-gray-800 placeholder-gray-500"
            />
            <button
              (click)="sendMessage()"
              class="px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-indigo-600 shadow-lg transition duration-300"
            >
              💬 Send Message
            </button>
          </div>
      
          <!-- Message Display -->
          <div>
            <h2 class="text-3xl font-bold text-gray-800 mb-4">🗨️ Messages:</h2>
            <ul class="space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100">
              <li
                *ngFor="let message of messageData"
                [ngStyle]="{'background-color': colorMap[message.senderId]}"
                class="p-4 rounded-xl shadow-sm text-white text-base font-medium tracking-wide"
              >
                <span class="font-semibold">{{ message.sender }}:</span> {{ message.text }}
              </li>
            </ul>
          </div>
      
        <div class="flex justify-center mt-6">
            <button
                (click)="saveMessage()"
                class="px-8 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500"
            >
                End Chat
            </button>
        </div>
    </div>
</div>